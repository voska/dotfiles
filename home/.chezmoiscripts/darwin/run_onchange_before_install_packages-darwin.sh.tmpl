#!/bin/bash

set -eufo pipefail

{{ $brews := list
    "act"
    "bat"
    "chezmoi"
    "coreutils"
    "curl"
    "dockutil"
    "fd"
    "ffmpeg"
    "findutils"
    "fzf"
    "gh"
    "git"
    "gitleaks"
    "grep"
    "imagemagick"
    "jq"
    "lazydocker"
    "lazygit"
    "lsd"
    "mdless"
    "mise"
    "nmap"
    "prettyping"
    "ripgrep"
    "tig"
    "tldr"
    "vim"
    "watchman"
-}}
{{ $casks := list
    "1password"
    "1password-cli"
    "adobe-creative-cloud"
    "arq"
    "beeper"
    "brave-browser"
    "chatgpt"
    "claude"
    "codex"
    "conductor"
    "cursor"
    "dolphin"
    "font-jetbrains-mono-nerd-font"
    "ghostty"
    "gpg-suite"
    "home-assistant"
    "imageoptim"
    "lm-studio"
    "macdown"
    "microsoft-auto-update"
    "microsoft-excel"
    "microsoft-powerpoint"
    "microsoft-word"
    "mullvad-vpn"
    "omnidisksweeper"
    "openaudible"
    "orbstack"
    "orcaslicer"
    "plex"
    "postico"
    "rectangle"
    "superwhisper"
    "tailscale-app"
    "teamviewer"
    "vimcal"
    "vlc"
    "whatsapp"
    "yaak"
    "zed"
    "zoom"
-}}

{{- if .workstation }}
{{ $casks = concat $casks (list
    "bambu-studio"
    "cleanshot"
    "mactex"
    "texstudio"
) -}}
{{- end }}

brew bundle --file=/dev/stdin <<EOF
{{ range ($brews | sortAlpha | uniq) -}}
brew "{{ . }}"
{{ end -}}
{{ range ($casks | sortAlpha | uniq) -}}
cask "{{ . }}"
{{ end -}}
EOF
